{
  "scenario": "AssetSellCRUD",
  "description": "Test SELL transaction CRUD with wallet and overview verification",
  "asset": {
    "input": {
      "symbol": "E2E-ASSET-SELL-CRUD",
      "name": "E2E Sell CRUD Test",
      "type": "STOCK",
      "testPrice": "100",
      "buyFee": "1",
      "sellFee": "1",
      "status": "ACTIVE"
    }
  },
  "entryTargets": [
    { "input": { "name": "ET1", "targetPercent": "2", "sortOrder": "1" } }
  ],
  "profitTargets": [
    { "input": { "name": "PT1", "targetPercent": "4", "allocationPercent": "50", "sortOrder": "1" } },
    { "input": { "name": "PT2", "targetPercent": "8", "allocationPercent": "30", "sortOrder": "2" } },
    { "input": { "name": "PT3", "targetPercent": "16", "allocationPercent": "20", "sortOrder": "3" } }
  ],
  "transactions": {
    "buyA": {
      "input": {
        "signal": "INITIAL",
        "price": "100",
        "investment": "600",
        "allocations": [
          { "ptPercent": "4", "percentage": "50" },
          { "ptPercent": "8", "percentage": "30" },
          { "ptPercent": "16", "percentage": "20" }
        ]
      },
      "expected": {
        "transaction": {
          "type": "Buy",
          "signal": "Initial",
          "price": "$100.00",
          "quantity": "6.00000",
          "investment": "$600.00",
          "entryTarget": "$97.03",
          "profitLoss": "-",
          "profitLossPercent": "-"
        },
        "wallets": [
          { "ptPercent": "4", "price": "$100.00", "shares": "3.00000", "investment": "$300.00", "pt": "$105.05", "pct2pt": "-4.81%" },
          { "ptPercent": "8", "price": "$100.00", "shares": "1.80000", "investment": "$180.00", "pt": "$109.09", "pct2pt": "-8.33%" },
          { "ptPercent": "16", "price": "$100.00", "shares": "1.20000", "investment": "$120.00", "pt": "$117.17", "pct2pt": "-14.66%" }
        ],
        "overview": {
          "totalShares": "6.00000",
          "ptShares": [
            { "ptPercent": "4", "shares": "3.00000" },
            { "ptPercent": "8", "shares": "1.80000" },
            { "ptPercent": "16", "shares": "1.20000" }
          ]
        }
      }
    },
    "sellA": {
      "isSell": true,
      "testPriceUpdate": "110",
      "input": {
        "ptPercent": "4",
        "walletPrice": "$100.00",
        "signal": "PROFITTARGET",
        "price": "110",
        "quantity": "1.5"
      },
      "expected": {
        "transaction": {
          "type": "Sell",
          "signal": "Profit Target",
          "price": "$110.00",
          "quantity": "1.50000",
          "amount": "$163.35",
          "profitLoss": "$13.35",
          "profitLossPercent": "8.90%"
        },
        "priorTransactions": [
          {
            "type": "Buy",
            "signal": "Initial",
            "price": "$100.00",
            "quantity": "6.00000",
            "investment": "$600.00",
            "entryTarget": "$97.03",
            "profitLoss": "-",
            "profitLossPercent": "-"
          }
        ],
        "wallets": [
          { "ptPercent": "4", "price": "$100.00", "shares": "1.50000", "investment": "$150.00", "pt": "$105.05", "pct2pt": "4.71%", "pct2ptHighlight": "green" },
          { "ptPercent": "8", "price": "$100.00", "shares": "1.80000", "investment": "$180.00", "pt": "$109.09", "pct2pt": "0.83%", "pct2ptHighlight": "green" },
          { "ptPercent": "16", "price": "$100.00", "shares": "1.20000", "investment": "$120.00", "pt": "$117.17", "pct2pt": "-6.12%", "pct2ptHighlight": "none" }
        ],
        "overview": {
          "totalShares": "4.50000",
          "ptShares": [
            { "ptPercent": "4", "shares": "1.50000" },
            { "ptPercent": "8", "shares": "1.80000" },
            { "ptPercent": "16", "shares": "1.20000" }
          ]
        }
      }
    },
    "sellB": {
      "isSell": true,
      "testPriceUpdate": "90",
      "input": {
        "ptPercent": "8",
        "walletPrice": "$100.00",
        "signal": "PROFITTARGET",
        "price": "90",
        "quantity": "1.8"
      },
      "expected": {
        "transaction": {
          "type": "Sell",
          "signal": "Profit Target",
          "price": "$90.00",
          "quantity": "1.80000",
          "amount": "$160.38",
          "profitLoss": "-$19.62",
          "profitLossPercent": "-10.90%"
        },
        "priorTransactions": [
          {
            "type": "Sell",
            "signal": "Profit Target",
            "price": "$110.00",
            "quantity": "1.50000",
            "amount": "$163.35",
            "profitLoss": "$13.35",
            "profitLossPercent": "8.90%"
          },
          {
            "type": "Buy",
            "signal": "Initial",
            "price": "$100.00",
            "quantity": "6.00000",
            "investment": "$600.00",
            "entryTarget": "$97.03",
            "profitLoss": "-",
            "profitLossPercent": "-"
          }
        ],
        "wallets": [
          { "ptPercent": "4", "price": "$100.00", "shares": "1.50000", "investment": "$150.00", "pt": "$105.05", "pct2pt": "-14.33%", "pct2ptHighlight": "none" },
          { "ptPercent": "16", "price": "$100.00", "shares": "1.20000", "investment": "$120.00", "pt": "$117.17", "pct2pt": "-23.19%", "pct2ptHighlight": "none" }
        ],
        "walletsNotPresent": [
          { "ptPercent": "8", "price": "$100.00" }
        ],
        "overview": {
          "totalShares": "2.70000",
          "ptShares": [
            { "ptPercent": "4", "shares": "1.50000" },
            { "ptPercent": "8", "shares": "0.00000" },
            { "ptPercent": "16", "shares": "1.20000" }
          ]
        }
      }
    },
    "editSellB": {
      "isSell": true,
      "target": {
        "signal": "Profit Target",
        "price": "$90.00",
        "amount": "$160.38"
      },
      "input": {
        "ptPercent": "8",
        "walletPrice": "$100.00",
        "signal": "CUSTOM",
        "price": "95",
        "quantity": "0.9"
      },
      "expected": {
        "transaction": {
          "type": "Sell",
          "signal": "Custom",
          "price": "$95.00",
          "quantity": "0.90000",
          "amount": "$84.65",
          "profitLoss": "-$5.36",
          "profitLossPercent": "-5.95%"
        },
        "priorTransactions": [
          {
            "type": "Sell",
            "signal": "Profit Target",
            "price": "$110.00",
            "quantity": "1.50000",
            "amount": "$163.35",
            "profitLoss": "$13.35",
            "profitLossPercent": "8.90%"
          },
          {
            "type": "Buy",
            "signal": "Initial",
            "price": "$100.00",
            "quantity": "6.00000",
            "investment": "$600.00",
            "entryTarget": "$97.03",
            "profitLoss": "-",
            "profitLossPercent": "-"
          }
        ],
        "wallets": [
          { "ptPercent": "4", "price": "$100.00", "shares": "1.50000", "investment": "$150.00", "pt": "$105.05", "pct2pt": "-14.33%", "pct2ptHighlight": "none" },
          { "ptPercent": "8", "price": "$100.00", "shares": "0.90000", "investment": "$90.00", "pt": "$109.09", "pct2pt": "-17.50%", "pct2ptHighlight": "none" },
          { "ptPercent": "16", "price": "$100.00", "shares": "1.20000", "investment": "$120.00", "pt": "$117.17", "pct2pt": "-23.19%", "pct2ptHighlight": "none" }
        ],
        "overview": {
          "totalShares": "3.60000",
          "ptShares": [
            { "ptPercent": "4", "shares": "1.50000" },
            { "ptPercent": "8", "shares": "0.90000" },
            { "ptPercent": "16", "shares": "1.20000" }
          ]
        },
        "walletIdVerification": {
          "walletPtPercent": "8",
          "walletPrice": "$100.00",
          "buyTransaction": {
            "signal": "Initial",
            "price": "$100.00",
            "investment": "$600.00"
          },
          "allocationPtPercent": "8"
        }
      }
    },
    "delSellB": {
      "isSell": true,
      "delete": true,
      "target": {
        "signal": "Custom",
        "price": "$95.00",
        "amount": "$84.65"
      },
      "expected": {
        "transactionNotPresent": {
          "signal": "Custom",
          "price": "$95.00",
          "amount": "$84.65"
        },
        "priorTransactions": [
          {
            "type": "Sell",
            "signal": "Profit Target",
            "price": "$110.00",
            "quantity": "1.50000",
            "amount": "$163.35",
            "profitLoss": "$13.35",
            "profitLossPercent": "8.90%"
          },
          {
            "type": "Buy",
            "signal": "Initial",
            "price": "$100.00",
            "quantity": "6.00000",
            "investment": "$600.00",
            "entryTarget": "$97.03",
            "profitLoss": "-",
            "profitLossPercent": "-"
          }
        ],
        "wallets": [
          { "ptPercent": "4", "price": "$100.00", "shares": "1.50000", "investment": "$150.00", "pt": "$105.05", "pct2pt": "-14.33%", "pct2ptHighlight": "none" },
          { "ptPercent": "8", "price": "$100.00", "shares": "1.80000", "investment": "$180.00", "pt": "$109.09", "pct2pt": "-17.50%", "pct2ptHighlight": "none" },
          { "ptPercent": "16", "price": "$100.00", "shares": "1.20000", "investment": "$120.00", "pt": "$117.17", "pct2pt": "-23.19%", "pct2ptHighlight": "none" }
        ],
        "overview": {
          "totalShares": "4.50000",
          "ptShares": [
            { "ptPercent": "4", "shares": "1.50000" },
            { "ptPercent": "8", "shares": "1.80000" },
            { "ptPercent": "16", "shares": "1.20000" }
          ]
        }
      }
    },
    "buyB": {
      "testPriceUpdate": "100",
      "input": {
        "signal": "ENTAR",
        "price": "100",
        "investment": "400",
        "allocations": [
          { "ptPercent": "4", "percentage": "40" },
          { "ptPercent": "8", "percentage": "40" },
          { "ptPercent": "16", "percentage": "20" }
        ]
      },
      "expected": {
        "transaction": {
          "type": "Buy",
          "signal": "Entry Target",
          "price": "$100.00",
          "quantity": "4.00000",
          "investment": "$400.00",
          "entryTarget": "$97.03",
          "profitLoss": "-",
          "profitLossPercent": "-"
        },
        "priorTransactions": [
          {
            "type": "Sell",
            "signal": "Profit Target",
            "price": "$110.00",
            "quantity": "1.50000",
            "amount": "$163.35",
            "profitLoss": "$13.35",
            "profitLossPercent": "8.90%"
          },
          {
            "type": "Buy",
            "signal": "Initial",
            "price": "$100.00",
            "quantity": "6.00000",
            "investment": "$600.00",
            "entryTarget": "$97.03",
            "profitLoss": "-",
            "profitLossPercent": "-"
          }
        ],
        "wallets": [
          { "ptPercent": "4", "price": "$100.00", "shares": "3.10000", "investment": "$310.00", "pt": "$105.05", "pct2pt": "-4.81%", "pct2ptHighlight": "none" },
          { "ptPercent": "8", "price": "$100.00", "shares": "3.40000", "investment": "$340.00", "pt": "$109.09", "pct2pt": "-8.33%", "pct2ptHighlight": "none" },
          { "ptPercent": "16", "price": "$100.00", "shares": "2.00000", "investment": "$200.00", "pt": "$117.17", "pct2pt": "-14.66%", "pct2ptHighlight": "none" }
        ],
        "overview": {
          "totalShares": "8.50000",
          "ptShares": [
            { "ptPercent": "4", "shares": "3.10000" },
            { "ptPercent": "8", "shares": "3.40000" },
            { "ptPercent": "16", "shares": "2.00000" }
          ]
        }
      }
    }
  }
}
