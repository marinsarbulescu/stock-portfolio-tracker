{
  "scenario": "TransactionSplit",
  "description": "Test BUY, SELL, and SPLIT transactions with wallet and overview verification",
  "asset": {
    "input": {
      "symbol": "E2E-TXN-SPLIT",
      "name": "E2E Transaction Split Test",
      "type": "STOCK",
      "testPrice": "100",
      "commission": "0.5",
      "status": "ACTIVE"
    },
    "budget": { "year": "2026", "amount": "1200" }
  },
  "entryTargets": [
    { "input": { "name": "ET -2%", "targetPercent": "2", "sortOrder": "1" } }
  ],
  "profitTargets": [
    { "input": { "name": "PT +4%", "targetPercent": "4", "allocationPercent": "50", "sortOrder": "1" } },
    { "input": { "name": "PT +8%", "targetPercent": "8", "allocationPercent": "30", "sortOrder": "2" } },
    { "input": { "name": "PT +16%", "targetPercent": "16", "allocationPercent": "20", "sortOrder": "3" } }
  ],
  "transactions": {
    "buyA": {
      "input": {
        "signal": "INITIAL",
        "price": "100",
        "investment": "300",
        "allocations": [
          { "ptPercent": "4", "percentage": "50" },
          { "ptPercent": "8", "percentage": "30" },
          { "ptPercent": "16", "percentage": "20" }
        ]
      },
      "expected": {
        "transaction": {
          "type": "Buy",
          "signal": "Initial",
          "price": "$100.00",
          "quantity": "3.00000",
          "investment": "$300.00",
          "entryTarget": "$98.00",
          "profitLoss": "-",
          "profitLossPercent": "-"
        },
        "wallets": [
          { "ptPercent": "4", "price": "$100.00", "shares": "1.50000", "investment": "$150.00", "pt": "$104.52", "pct2pt": "-4.33%" },
          { "ptPercent": "8", "price": "$100.00", "shares": "0.90000", "investment": "$90.00", "pt": "$108.54", "pct2pt": "-7.87%" },
          { "ptPercent": "16", "price": "$100.00", "shares": "0.60000", "investment": "$60.00", "pt": "$116.58", "pct2pt": "-14.22%" }
        ],
        "overview": {
          "totalShares": "3.00000",
          "ptShares": [
            { "ptPercent": "4", "shares": "1.50000" },
            { "ptPercent": "8", "shares": "0.90000" },
            { "ptPercent": "16", "shares": "0.60000" }
          ]
        },
        "financialOverview": {
          "oop": "$300.00",
          "marketValue": "$300.00",
          "roi": "0.00%",
          "available": "$900.00"
        }
      }
    },
    "sellA": {
      "isSell": true,
      "testPriceUpdate": "110",
      "input": {
        "ptPercent": "4",
        "walletPrice": "$100.00",
        "signal": "PROFITTARGET",
        "price": "110",
        "quantity": "0.75"
      },
      "expected": {
        "transaction": {
          "type": "Sell",
          "signal": "Profit Target",
          "price": "$110.00",
          "quantity": "0.75000",
          "amount": "$82.09",
          "profitLoss": "$7.09",
          "profitLossPercent": "9.45%"
        },
        "priorTransactions": [
          {
            "type": "Buy",
            "signal": "Initial",
            "price": "$100.00",
            "quantity": "3.00000",
            "investment": "$300.00",
            "entryTarget": "$98.00",
            "profitLoss": "-",
            "profitLossPercent": "-"
          }
        ],
        "wallets": [
          { "ptPercent": "4", "price": "$100.00", "shares": "0.75000", "investment": "$75.00", "pt": "$104.52", "pct2pt": "5.24%", "pct2ptHighlight": "green" },
          { "ptPercent": "8", "price": "$100.00", "shares": "0.90000", "investment": "$90.00", "pt": "$108.54", "pct2pt": "1.34%", "pct2ptHighlight": "green" },
          { "ptPercent": "16", "price": "$100.00", "shares": "0.60000", "investment": "$60.00", "pt": "$116.58", "pct2pt": "-5.65%", "pct2ptHighlight": "none" }
        ],
        "overview": {
          "totalShares": "2.25000",
          "ptShares": [
            { "ptPercent": "4", "shares": "0.75000" },
            { "ptPercent": "8", "shares": "0.90000" },
            { "ptPercent": "16", "shares": "0.60000" }
          ]
        },
        "financialOverview": {
          "oop": "$300.00",
          "marketValue": "$247.50",
          "roi": "9.86%",
          "available": "$982.09"
        }
      }
    },
    "buyB": {
      "testPriceUpdate": "90",
      "input": {
        "signal": "ENTAR",
        "price": "90",
        "investment": "200",
        "allocations": [
          { "ptPercent": "4", "percentage": "50" },
          { "ptPercent": "8", "percentage": "50" },
          { "ptPercent": "16", "percentage": "0" }
        ]
      },
      "expected": {
        "transaction": {
          "type": "Buy",
          "signal": "Entry Target",
          "price": "$90.00",
          "quantity": "2.22222",
          "investment": "$200.00",
          "entryTarget": "$88.20",
          "profitLoss": "-",
          "profitLossPercent": "-"
        },
        "priorTransactions": [
          {
            "type": "Sell",
            "signal": "Profit Target",
            "price": "$110.00",
            "quantity": "0.75000",
            "amount": "$82.09",
            "profitLoss": "$7.09",
            "profitLossPercent": "9.45%"
          },
          {
            "type": "Buy",
            "signal": "Initial",
            "price": "$100.00",
            "quantity": "3.00000",
            "investment": "$300.00",
            "entryTarget": "$98.00",
            "profitLoss": "-",
            "profitLossPercent": "-"
          }
        ],
        "wallets": [
          { "ptPercent": "4", "price": "$100.00", "shares": "0.75000", "investment": "$75.00", "pt": "$104.52", "pct2pt": "-13.89%" },
          { "ptPercent": "4", "price": "$90.00", "shares": "1.11111", "investment": "$100.00", "pt": "$94.07", "pct2pt": "-4.33%" },
          { "ptPercent": "8", "price": "$100.00", "shares": "0.90000", "investment": "$90.00", "pt": "$108.54", "pct2pt": "-17.08%" },
          { "ptPercent": "8", "price": "$90.00", "shares": "1.11111", "investment": "$100.00", "pt": "$97.69", "pct2pt": "-7.87%" },
          { "ptPercent": "16", "price": "$100.00", "shares": "0.60000", "investment": "$60.00", "pt": "$116.58", "pct2pt": "-22.80%" }
        ],
        "overview": {
          "totalShares": "4.47222",
          "ptShares": [
            { "ptPercent": "4", "shares": "1.86111" },
            { "ptPercent": "8", "shares": "2.01111" },
            { "ptPercent": "16", "shares": "0.60000" }
          ]
        },
        "financialOverview": {
          "oop": "$417.91",
          "marketValue": "$402.50",
          "roi": "-3.69%",
          "available": "$782.09"
        }
      }
    },
    "splitA": {
      "isSplit": true,
      "testPriceUpdate": "45",
      "splitInput": {
        "splitRatio": "2"
      },
      "expected": {
        "transaction": {
          "type": "Split",
          "ratio": "2:1"
        },
        "priorTransactions": [
          {
            "type": "Buy",
            "signal": "Entry Target",
            "price": "$90.00",
            "quantity": "2.22222",
            "investment": "$200.00",
            "entryTarget": "$88.20",
            "profitLoss": "-",
            "profitLossPercent": "-"
          },
          {
            "type": "Sell",
            "signal": "Profit Target",
            "price": "$110.00",
            "quantity": "0.75000",
            "amount": "$82.09",
            "profitLoss": "$7.09",
            "profitLossPercent": "9.45%"
          },
          {
            "type": "Buy",
            "signal": "Initial",
            "price": "$100.00",
            "quantity": "3.00000",
            "investment": "$300.00",
            "entryTarget": "$98.00",
            "profitLoss": "-",
            "profitLossPercent": "-"
          }
        ],
        "wallets": [
          { "ptPercent": "4", "price": "$50.00", "shares": "1.50000", "investment": "$75.00", "pt": "$52.26", "pct2pt": "-13.89%" },
          { "ptPercent": "4", "price": "$45.00", "shares": "2.22222", "investment": "$100.00", "pt": "$47.04", "pct2pt": "-4.33%" },
          { "ptPercent": "8", "price": "$50.00", "shares": "1.80000", "investment": "$90.00", "pt": "$54.27", "pct2pt": "-17.08%" },
          { "ptPercent": "8", "price": "$45.00", "shares": "2.22222", "investment": "$100.00", "pt": "$48.84", "pct2pt": "-7.87%" },
          { "ptPercent": "16", "price": "$50.00", "shares": "1.20000", "investment": "$60.00", "pt": "$58.29", "pct2pt": "-22.80%" }
        ],
        "overview": {
          "totalShares": "8.94444",
          "ptShares": [
            { "ptPercent": "4", "shares": "3.72222" },
            { "ptPercent": "8", "shares": "4.02222" },
            { "ptPercent": "16", "shares": "1.20000" }
          ]
        },
        "financialOverview": {
          "oop": "$417.91",
          "marketValue": "$402.50",
          "roi": "-3.69%",
          "available": "$782.09"
        }
      }
    },
    "buyC": {
      "testPriceUpdate": "50",
      "input": {
        "signal": "CUSTOM",
        "price": "50",
        "investment": "300",
        "allocations": [
          { "ptPercent": "4", "percentage": "50" },
          { "ptPercent": "8", "percentage": "30" },
          { "ptPercent": "16", "percentage": "20" }
        ]
      },
      "expected": {
        "transaction": {
          "type": "Buy",
          "signal": "Custom",
          "price": "$50.00",
          "quantity": "6.00000",
          "investment": "$300.00",
          "entryTarget": "$49.00",
          "profitLoss": "-",
          "profitLossPercent": "-"
        },
        "wallets": [
          { "ptPercent": "4", "price": "$45.00", "shares": "2.22222", "investment": "$100.00", "pt": "$47.04", "pct2pt": "6.30%", "pct2ptHighlight": "green" },
          { "ptPercent": "4", "price": "$50.00", "shares": "4.50000", "investment": "$225.00", "pt": "$52.26", "pct2pt": "-4.33%" },
          { "ptPercent": "8", "price": "$45.00", "shares": "2.22222", "investment": "$100.00", "pt": "$48.84", "pct2pt": "2.37%", "pct2ptHighlight": "green" },
          { "ptPercent": "8", "price": "$50.00", "shares": "3.60000", "investment": "$180.00", "pt": "$54.27", "pct2pt": "-7.87%" },
          { "ptPercent": "16", "price": "$50.00", "shares": "2.40000", "investment": "$120.00", "pt": "$58.29", "pct2pt": "-14.22%" }
        ],
        "overview": {
          "totalShares": "14.94444",
          "ptShares": [
            { "ptPercent": "4", "shares": "6.72222" },
            { "ptPercent": "8", "shares": "5.82222" },
            { "ptPercent": "16", "shares": "2.40000" }
          ]
        },
        "financialOverview": {
          "oop": "$717.91",
          "marketValue": "$747.22",
          "roi": "4.08%",
          "available": "$482.09"
        }
      }
    },
    "splitB": {
      "isSplit": true,
      "testPriceUpdate": "16.67",
      "splitInput": {
        "splitRatio": "3"
      },
      "expected": {
        "transaction": {
          "type": "Split",
          "ratio": "3:1"
        },
        "wallets": [
          { "ptPercent": "4", "price": "$15.00", "shares": "6.66666", "investment": "$100.00", "pt": "$15.68", "pct2pt": "6.32%", "pct2ptHighlight": "green" },
          { "ptPercent": "4", "price": "$16.67", "shares": "13.50000", "investment": "$225.00", "pt": "$17.42", "pct2pt": "-4.31%" },
          { "ptPercent": "8", "price": "$15.00", "shares": "6.66666", "investment": "$100.00", "pt": "$16.28", "pct2pt": "2.39%", "pct2ptHighlight": "green" },
          { "ptPercent": "8", "price": "$16.67", "shares": "10.80000", "investment": "$180.00", "pt": "$18.09", "pct2pt": "-7.85%" },
          { "ptPercent": "16", "price": "$16.67", "shares": "7.20000", "investment": "$120.00", "pt": "$19.43", "pct2pt": "-14.21%" }
        ],
        "overview": {
          "totalShares": "44.83332",
          "ptShares": [
            { "ptPercent": "4", "shares": "20.16666" },
            { "ptPercent": "8", "shares": "17.46666" },
            { "ptPercent": "16", "shares": "7.20000" }
          ]
        },
        "financialOverview": {
          "oop": "$717.91",
          "marketValue": "$747.37",
          "roi": "4.10%",
          "available": "$482.09"
        }
      }
    },
    "sellC": {
      "isSell": true,
      "testPriceUpdate": "20",
      "input": {
        "ptPercent": "8",
        "walletPrice": "$15.00",
        "signal": "CUSTOM",
        "price": "20",
        "quantity": "6.66666"
      },
      "expected": {
        "transaction": {
          "type": "Sell",
          "signal": "Custom",
          "price": "$20.00",
          "quantity": "6.66666",
          "amount": "$132.67",
          "profitLoss": "$32.67",
          "profitLossPercent": "32.67%"
        },
        "wallets": [
          { "ptPercent": "4", "price": "$15.00", "shares": "6.66666", "investment": "$100.00", "pt": "$15.68", "pct2pt": "27.56%", "pct2ptHighlight": "green" },
          { "ptPercent": "4", "price": "$16.67", "shares": "13.50000", "investment": "$225.00", "pt": "$17.42", "pct2pt": "14.81%", "pct2ptHighlight": "green" },
          { "ptPercent": "8", "price": "$16.67", "shares": "10.80000", "investment": "$180.00", "pt": "$18.09", "pct2pt": "10.56%", "pct2ptHighlight": "green" },
          { "ptPercent": "16", "price": "$16.67", "shares": "7.20000", "investment": "$120.00", "pt": "$19.43", "pct2pt": "2.93%", "pct2ptHighlight": "green" }
        ],
        "walletsNotPresent": [
          { "ptPercent": "8", "price": "$15.00" }
        ],
        "overview": {
          "totalShares": "38.16666",
          "ptShares": [
            { "ptPercent": "4", "shares": "20.16666" },
            { "ptPercent": "8", "shares": "10.80000" },
            { "ptPercent": "16", "shares": "7.20000" }
          ]
        },
        "financialOverview": {
          "oop": "$717.91",
          "marketValue": "$763.33",
          "roi": "24.81%",
          "available": "$614.75"
        }
      }
    },
    "checkSplitBProtection": {
      "isProtectionCheck": true,
      "targetTransaction": {
        "type": "Split",
        "ratio": "3:1"
      },
      "expected": {
        "editButtonHidden": true,
        "deleteButtonHidden": true
      }
    },
    "deleteSellC": {
      "isDelete": true,
      "targetTransaction": {
        "signal": "Custom",
        "price": "$20.00",
        "amount": "$132.67"
      },
      "expected": {
        "transactionNotPresent": {
          "signal": "Custom",
          "price": "$20.00"
        },
        "wallets": [
          { "ptPercent": "4", "price": "$15.00", "shares": "6.66666", "investment": "$100.00", "pt": "$15.68", "pct2pt": "27.56%", "pct2ptHighlight": "green" },
          { "ptPercent": "4", "price": "$16.67", "shares": "13.50000", "investment": "$225.00", "pt": "$17.42", "pct2pt": "14.81%", "pct2ptHighlight": "green" },
          { "ptPercent": "8", "price": "$15.00", "shares": "6.66666", "investment": "$100.00", "pt": "$16.28", "pct2pt": "22.84%", "pct2ptHighlight": "green" },
          { "ptPercent": "8", "price": "$16.67", "shares": "10.80000", "investment": "$180.00", "pt": "$18.09", "pct2pt": "10.56%", "pct2ptHighlight": "green" },
          { "ptPercent": "16", "price": "$16.67", "shares": "7.20000", "investment": "$120.00", "pt": "$19.43", "pct2pt": "2.93%", "pct2ptHighlight": "green" }
        ],
        "overview": {
          "totalShares": "44.83332",
          "ptShares": [
            { "ptPercent": "4", "shares": "20.16666" },
            { "ptPercent": "8", "shares": "17.46666" },
            { "ptPercent": "16", "shares": "7.20000" }
          ]
        },
        "financialOverview": {
          "oop": "$717.91",
          "marketValue": "$896.67",
          "roi": "24.90%",
          "available": "$482.09"
        }
      }
    },
    "editSplitB": {
      "isEditSplit": true,
      "testPriceUpdate": "25",
      "targetTransaction": {
        "type": "Split",
        "ratio": "3:1"
      },
      "input": {
        "splitRatio": "2"
      },
      "expected": {
        "transaction": {
          "type": "Split",
          "ratio": "2:1"
        },
        "wallets": [
          { "ptPercent": "4", "price": "$22.50", "shares": "4.44444", "investment": "$100.00", "pt": "$23.52", "pct2pt": "6.30%", "pct2ptHighlight": "green" },
          { "ptPercent": "4", "price": "$25.00", "shares": "9.00000", "investment": "$225.00", "pt": "$26.13", "pct2pt": "-4.33%" },
          { "ptPercent": "8", "price": "$22.50", "shares": "4.44444", "investment": "$100.00", "pt": "$24.42", "pct2pt": "2.37%", "pct2ptHighlight": "green" },
          { "ptPercent": "8", "price": "$25.00", "shares": "7.20000", "investment": "$180.00", "pt": "$27.14", "pct2pt": "-7.87%" },
          { "ptPercent": "16", "price": "$25.00", "shares": "4.80000", "investment": "$120.00", "pt": "$29.15", "pct2pt": "-14.22%" }
        ],
        "overview": {
          "totalShares": "29.88888",
          "ptShares": [
            { "ptPercent": "4", "shares": "13.44444" },
            { "ptPercent": "8", "shares": "11.64444" },
            { "ptPercent": "16", "shares": "4.80000" }
          ]
        },
        "financialOverview": {
          "oop": "$717.91",
          "marketValue": "$747.22",
          "roi": "4.08%",
          "available": "$482.09"
        }
      }
    },
    "sellD": {
      "isSell": true,
      "input": {
        "ptPercent": "8",
        "walletPrice": "$22.50",
        "signal": "CUSTOM",
        "price": "25",
        "quantity": "4.44444"
      },
      "expected": {
        "transaction": {
          "type": "Sell",
          "signal": "Custom",
          "price": "$25.00",
          "quantity": "4.44444",
          "amount": "$110.56",
          "profitLoss": "$10.56",
          "profitLossPercent": "10.56%"
        },
        "wallets": [
          { "ptPercent": "4", "price": "$22.50", "shares": "4.44444", "investment": "$100.00", "pt": "$23.52", "pct2pt": "6.30%", "pct2ptHighlight": "green" },
          { "ptPercent": "4", "price": "$25.00", "shares": "9.00000", "investment": "$225.00", "pt": "$26.13", "pct2pt": "-4.33%" },
          { "ptPercent": "8", "price": "$25.00", "shares": "7.20000", "investment": "$180.00", "pt": "$27.14", "pct2pt": "-7.87%" },
          { "ptPercent": "16", "price": "$25.00", "shares": "4.80000", "investment": "$120.00", "pt": "$29.15", "pct2pt": "-14.22%" }
        ],
        "walletsNotPresent": [
          { "ptPercent": "8", "price": "$22.50" }
        ],
        "overview": {
          "totalShares": "25.44444",
          "ptShares": [
            { "ptPercent": "4", "shares": "13.44444" },
            { "ptPercent": "8", "shares": "7.20000" },
            { "ptPercent": "16", "shares": "4.80000" }
          ]
        },
        "financialOverview": {
          "oop": "$717.91",
          "marketValue": "$636.11",
          "roi": "4.01%",
          "available": "$592.64"
        }
      }
    },
    "deleteSellD": {
      "isDelete": true,
      "targetTransaction": {
        "signal": "Custom",
        "price": "$25.00",
        "amount": "$110.56"
      },
      "expected": {
        "transactionNotPresent": {
          "signal": "Custom",
          "price": "$25.00"
        },
        "wallets": [
          { "ptPercent": "4", "price": "$22.50", "shares": "4.44444", "investment": "$100.00", "pt": "$23.52", "pct2pt": "6.30%", "pct2ptHighlight": "green" },
          { "ptPercent": "4", "price": "$25.00", "shares": "9.00000", "investment": "$225.00", "pt": "$26.13", "pct2pt": "-4.33%" },
          { "ptPercent": "8", "price": "$22.50", "shares": "4.44444", "investment": "$100.00", "pt": "$24.42", "pct2pt": "2.37%", "pct2ptHighlight": "green" },
          { "ptPercent": "8", "price": "$25.00", "shares": "7.20000", "investment": "$180.00", "pt": "$27.14", "pct2pt": "-7.87%" },
          { "ptPercent": "16", "price": "$25.00", "shares": "4.80000", "investment": "$120.00", "pt": "$29.15", "pct2pt": "-14.22%" }
        ],
        "overview": {
          "totalShares": "29.88888",
          "ptShares": [
            { "ptPercent": "4", "shares": "13.44444" },
            { "ptPercent": "8", "shares": "11.64444" },
            { "ptPercent": "16", "shares": "4.80000" }
          ]
        },
        "financialOverview": {
          "oop": "$717.91",
          "marketValue": "$747.22",
          "roi": "4.08%",
          "available": "$482.09"
        }
      }
    },
    "deleteSplitB": {
      "isDeleteSplit": true,
      "targetTransaction": {
        "type": "Split",
        "ratio": "2:1"
      },
      "expected": {
        "wallets": [
          { "ptPercent": "4", "price": "$45.00", "shares": "2.22222", "investment": "$100.00", "pt": "$47.04", "pct2pt": "-46.85%" },
          { "ptPercent": "4", "price": "$50.00", "shares": "4.50000", "investment": "$225.00", "pt": "$52.26", "pct2pt": "-52.16%" },
          { "ptPercent": "8", "price": "$45.00", "shares": "2.22222", "investment": "$100.00", "pt": "$48.84", "pct2pt": "-48.82%" },
          { "ptPercent": "8", "price": "$50.00", "shares": "3.60000", "investment": "$180.00", "pt": "$54.27", "pct2pt": "-53.94%" },
          { "ptPercent": "16", "price": "$50.00", "shares": "2.40000", "investment": "$120.00", "pt": "$58.29", "pct2pt": "-57.11%" }
        ],
        "overview": {
          "totalShares": "14.94444",
          "ptShares": [
            { "ptPercent": "4", "shares": "6.72222" },
            { "ptPercent": "8", "shares": "5.82222" },
            { "ptPercent": "16", "shares": "2.40000" }
          ]
        },
        "financialOverview": {
          "oop": "$717.91",
          "marketValue": "$373.61",
          "roi": "-47.96%",
          "available": "$482.09"
        }
      }
    }
  }
}
